(()=>{"use strict";const t=function(){function t(t,e,n,r){this._id=t,this._name=e,this._email=n,this._address=r}return t.prototype.id=function(){return this._id},t.prototype.name=function(){return this._name},t.prototype.email=function(){return this._email},t.prototype.address=function(){return this._address},t}(),e=function(){function t(t){this._user=t}return t.prototype.buildHtmlElement=function(){var t=document.createElement("div");return t.innerHTML="\n\t\t\t<div>\n\t\t\t\t".concat(this._user.id(),"\n\t\t\t\t").concat(this._user.name(),"\n\t\t\t\t").concat(this._user.email(),"\n\t\t\t\t").concat(this._user.address(),'\n\t\t\t\t<a href="/user/').concat(this._user.id(),'/">Edit</a>\n\t\t\t\t<input type="checkbox" name="userDelete" value="').concat(this._user.id(),'">\n\t\t\t</div>\n\t\t\t'),t},t}();const n=function(){function e(){this._form=document.createElement("form")}return e.prototype.buildHtmlElement=function(){var e=this;return this._form.innerHTML='\n\t\t\t\t<div>Name: <input class="name" required name="name"></div>\n\t\t\t\t<div>Email: <input class="email" required name="email"></div>\n\t\t\t\t<div>Address: <input class="address" required name="address"></div>\n\t\t\t\t<input type="submit">\n\t\t\t',this._form.addEventListener("submit",(function(n){n.preventDefault();var r=e._form.querySelector(".name"),i=e._form.querySelector(".email"),o=e._form.querySelector(".address"),a=new t(0,r.value,i.value,o.value);e._createUser(a)})),this._form},e.prototype._createUser=function(t){return e=this,n=void 0,i=function(){var e,n;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(r){switch(r.label){case 0:return e={name:t.name(),email:t.email(),address:t.address()},[4,fetch("/users/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return(n=r.sent()).ok?[4,n.json()]:[3,3];case 2:return r.sent(),[3,4];case 3:alert("Error HTTP: "+n.status),r.label=4;case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function u(t){try{s(i.throw(t))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,u)}s((i=i.apply(e,n||[])).next())}));var e,n,r,i},e}();var r=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};const o=function(){function o(){this._html=document.createElement("div"),this._html.className="user_panel",this._template="list"}return o.prototype.switchToListUsers=function(){this._template="list"},o.prototype.switchToAddUser=function(){this._template="add"},o.prototype.buildHtmlElement=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:switch(this._template){case"list":return[3,1];case"add":return[3,3]}return[3,5];case 1:return[4,this._listUsers()];case 2:case 4:return t.sent(),[3,5];case 3:return[4,this._addUser()];case 5:return[2,this._html]}}))}))},o.prototype._listUsers=function(){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){switch(n.label){case 0:return[4,this._getUsers()];case 1:return n.sent().forEach((function(n){var r=new e(n);t._html.appendChild(r.buildHtmlElement())})),this._html.appendChild(this._buildHtmlButtonAdd()),[2]}}))}))},o.prototype._addUser=function(){return r(this,void 0,void 0,(function(){var t;return i(this,(function(e){return t=new n,this._html.appendChild(t.buildHtmlElement()),[2]}))}))},o.prototype._getUsers=function(){return r(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return e=[],[4,fetch("/users/")];case 1:return(n=r.sent()).ok?[4,n.json()]:[3,3];case 2:return r.sent().forEach((function(n){var r=new t(n.id,n.name,n.email,n.address);e.push(r)})),[3,4];case 3:alert("Error HTTP: "+n.status),r.label=4;case 4:return[2,e]}}))}))},o.prototype._buildHtmlButtonAdd=function(){var t=this,e=document.createElement("button");return e.innerHTML="Add",e.addEventListener("click",(function(e){e.preventDefault(),t.switchToAddUser()})),e},o}();const a=function(){function t(t){this._appContainer=document.querySelector(t)}return t.prototype.run=function(){return t=this,e=void 0,r=function(){var t,e,n;return function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(r){switch(r.label){case 0:return t=new o,n=(e=this._appContainer).appendChild,[4,t.buildHtmlElement()];case 1:return n.apply(e,[r.sent()]),[2]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}));var t,e,n,r},t}();window.onload=function(){return new a("#app").run()}})();
//# sourceMappingURL=app.js.map